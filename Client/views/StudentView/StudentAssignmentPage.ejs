<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Announcement Page</title>
  <link rel="stylesheet" href="../../Styles/Main.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css" integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N" crossorigin="anonymous">
  <script src="https://kit.fontawesome.com/bd7cd2de14.js" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

  <style>
    /* Add any additional styles here */
    .assignment {
      border: 1px solid #ccc;
      padding: 10px;
      margin-bottom: 15px;
    }

    h3 {
      margin-bottom: 5px;
    }
  </style>
</head>

<body>
  <div id="assignments-container">
    <!-- EJS-like syntax directly in HTML -->
    <% let assignments = [] %>
    <% if (assignments && assignments.length > 0) { %>
      <% assignments.forEach(function(assignment) { %>
        <div class="assignment">
          <h3>Assignment <%= assignment.exerid %></h3>
          <p><%= assignment.description %></p>
        </div>
      <% }); %>
    <% } else { %>
      <p>No assignments available.</p>
    <% } %>
    <!-- End of EJS-like syntax -->
  </div>

  <script>
    // Function to fetch assignments and update the page
    function fetchAssignments() {
      // Make an Axios request to the server endpoint
      axios.get('/user/assignments')
        .then(function(response) {
          // Update the assignments-container with the new assignments
          console.log("Success! I can render now");
          document.getElementById('assignments-container').innerHTML = response.data;
          // Assignments should be an array, assuming your server is returning an array
          assignments = response.data;
        })
        .catch(function(error) {
          console.error("Error fetching assignments:", error);
        });
    }
  
    // Call fetchAssignments on page load
    fetchAssignments();
  </script>
</body>

</html>
